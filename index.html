<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Learn the fundamentals of Sumerian, exploring the world's earliest writing system through comprehensive lectures, texts, and interactive exercises." />
  <meta name="keywords" content="Sumerian language, cuneiform, ancient Mesopotamia, language learning" />
  <title>Sumerian For Beginners: Learn the World's Earliest Written Language</title>

  <!-- Preconnect to Google Fonts for better performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Stylesheet with preload for critical CSS -->
  <link rel="preload" href="css/styles.css" as="style">
  <link rel="stylesheet" href="css/styles.css" />

  <!-- Google Fonts with specific weights for optimal loading -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Source+Serif+Pro:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>

<body>
<header>
  <nav class="navbar" aria-label="Main navigation">
    <div class="nav-logo" title="DINGIR - Sumerian symbol for divinity">íÄ≠</div>
    <ul class="nav-links" role="menubar">
      <li role="none"><a href="#lectures" role="menuitem">Lectures</a></li>
      <li role="none"><a href="#texts" role="menuitem">Texts</a></li>
      <li role="none"><a href="#exercises" role="menuitem">Exercises</a></li>
    </ul>
  </nav>
</header>

<section class="hero" aria-labelledby="hero-heading">
  <div class="hero-content">
    <h1 id="hero-heading">First Steps in Sumerian: An Introduction to the World's Earliest Written Language</h1>
    <p>Journey through time to master the language of ancient Mesopotamia, from basic cuneiform signs to reading original texts. Experience the writing system that shaped human civilization.</p>
    <a href="#history" class="btn-primary" title="Begin your journey">
      <span class="sumerian-char" aria-hidden="true">íäï</span>
      <span class="button-text">Start Learning</span>
    </a>
  </div>
</section>

<main>
  <!-- Modified material card HTML -->
  <div class="materials-container">
    <a href="#"
       class="material-card"
       data-file-url="https://sumerian-materials.sgp1.cdn.digitaloceanspaces.com/Textbook.pdf"
       data-file-name="Sumerian-Grammar-Guide.pdf"
       onclick="handleDownload(this); return false;">
      <div class="material-icon">íÅæ</div>
      <div class="material-content">
        <h3>Sumerian Grammar Guide</h3>
        <p>Essential reference for cuneiform writing and grammar structures</p>
        <span class="download-size">PDF ‚Ä¢ 68.43 MB</span>
        <span class="download-status" aria-live="polite"></span>
      </div>
    </a>
  </div>

  <script>
    async function handleDownload(element) {
      const statusSpan = element.querySelector('.download-status');
      const fileUrl = element.dataset.fileUrl;
      const fileName = element.dataset.fileName;

      try {
        statusSpan.textContent = 'Starting download...';

        // First, try to check if the file is accessible
        const response = await fetch(fileUrl, {
          method: 'GET',
          mode: 'cors', // Enable CORS
          headers: {
            'Accept': 'application/pdf',
          }
        });

        if (!response.ok) {
          // If the file isn't accessible directly, try an alternative approach
          const directLink = document.createElement('a');
          directLink.href = fileUrl;
          directLink.target = '_blank';
          directLink.download = fileName;

          // Create and dispatch a click event
          const clickEvent = new MouseEvent('click', {
            view: window,
            bubbles: true,
            cancelable: false
          });

          directLink.dispatchEvent(clickEvent);
          statusSpan.textContent = 'Opening download in new tab...';

          // Clear status after a delay
          setTimeout(() => {
            statusSpan.textContent = '';
          }, 3000);

          return;
        }

        // If we got here, the fetch was successful
        const blob = await response.blob();
        const downloadUrl = window.URL.createObjectURL(blob);
        const downloadLink = document.createElement('a');

        downloadLink.style.display = 'none';
        downloadLink.href = downloadUrl;
        downloadLink.download = fileName;

        document.body.appendChild(downloadLink);
        downloadLink.click();

        // Cleanup
        setTimeout(() => {
          document.body.removeChild(downloadLink);
          window.URL.revokeObjectURL(downloadUrl);
          statusSpan.textContent = 'Download complete!';

          setTimeout(() => {
            statusSpan.textContent = '';
          }, 3000);
        }, 100);

      } catch (error) {
        console.error('Download failed:', error);

        // Try the direct download approach as a fallback
        const directLink = document.createElement('a');
        directLink.href = fileUrl;
        directLink.target = '_blank';
        directLink.download = fileName;
        directLink.click();

        statusSpan.textContent = 'Opening in new tab...';

        setTimeout(() => {
          statusSpan.textContent = '';
        }, 5000);
      }
    }
  </script>

  <style>
    .download-status {
      display: block;
      margin-top: 0.5rem;
      font-size: 0.875rem;
      color: #666;
    }

    .material-card {
      cursor: pointer;
    }
  </style>

  <!-- Optional: Add some CSS for the download status -->
  <style>
    .download-status {
      display: block;
      margin-top: 0.5rem;
      font-size: 0.875rem;
      color: #666;
    }
  </style>
  <section class="content-section" id="history" aria-labelledby="history-heading">
    <h2 id="history-heading">Introduction to Sumerian Civilization</h2>
    <p>
      Sumerian civilization flourished in ancient Mesopotamia, giving rise to the world's first writing system.
      From the bustling streets of Girsu to the grand temples of Ur, we'll explore how this remarkable
      civilization developed its sophisticated system of communication.
    </p>
  </section>

  <section class="content-section" id="lecture-summary" aria-labelledby="lecture-heading">
    <h2 id="lecture-heading">Lecture Summary and Practice Exercises</h2>
    <p>
      Each lecture provides a comprehensive introduction to key aspects of Sumerian language and writing,
      accompanied by carefully selected exercises to reinforce your learning. While this summary serves
      as a quick reference, always consult the complete lecture materials for detailed instruction.
    </p>
  </section>

  <section class="content-section" id="texts-analysis" aria-labelledby="texts-heading">
    <h2 id="texts-heading">Sumerian Texts and Their Analysis</h2>
    <p>
      Explore authentic Sumerian texts using standard academic transliteration and analysis conventions.
      Each text is accompanied by detailed commentary and cultural context.
    </p>
    <div class="gallery">
      <figure class="gallery-item">
        <img
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Enthroned_King_of_Ur.jpg/1920px-Enthroned_King_of_Ur.jpg"
                alt="Relief depicting an enthroned King of Ur"
        />
        <figcaption>
          King of <a href="https://en.wikipedia.org/wiki/Ur" target="_blank" rel="noopener noreferrer">Ur</a>
          <span class="caption-details">(Early Dynastic Period, c. 2500 BCE)</span>
        </figcaption>
      </figure>
    </div>
  </section>
</main>

<footer>
  <div class="footer-content">
    <p class="copyright">¬© 2025 Yonghao Lee. All rights reserved.</p>
    <nav class="footer-nav" aria-label="Footer navigation">
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="#privacy">Privacy Policy</a></li>
      </ul>
    </nav>
  </div>
</footer>